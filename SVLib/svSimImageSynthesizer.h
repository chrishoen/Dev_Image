#pragma once

/*==============================================================================
SV namespace: sixdofs that are measured by a computer vision based system.
Sim ImageSynthesizer.
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include <opencv2/core/core.hpp>

#include "svSimParms.h"

namespace SV
{

//******************************************************************************
//******************************************************************************
//******************************************************************************
//******************************************************************************
//******************************************************************************
//******************************************************************************
// This class provides a function that generates a simulated image that can
// be used to test the point miner. The generated image contains a single 
// pulse.

class SimImageSynthesizer
{
public:

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   SimParms* mP;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Infrastructure.

   // Constructor.
   SimImageSynthesizer();
   SimImageSynthesizer(SimParms* aSimParms);
   void initialize(SimParms* aSimParms);
   void reset();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Generate a simulated image.
   void doGenerateImage(
      cv::Mat&         aImage);      // Output

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Generate a simulated pulse at an image point.
   void doGeneratePulse1(
      SV::RCIndex      aCenterPixel,  // Input
      cv::Mat&         aImage);       // InOut
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
}//namespace


